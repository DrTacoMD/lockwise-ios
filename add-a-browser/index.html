<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>How to: add a browser - Firefox Lockbox for iOS</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "How to: add a browser";
    var mkdocs_page_input_path = "add-a-browser.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Firefox Lockbox for iOS</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../release-notes/">Release Notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">How to Contribute</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../contributing/">Contributing</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../metrics/">Telemetry and Metrics</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developer Guides</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../install/">Build and Install</a>
                </li>
                <li class="">
                    
    <a class="" href="../architecture/">Architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../updating_libraries/">Dependencies</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">How to: add a browser</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#add-a-browser-setting-to-firefox-lockbox">Add a browser setting to Firefox Lockbox</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../new-ui/">How to: add a UI feature</a>
                </li>
                <li class="">
                    
    <a class="" href="../test-plan/">Test Plan</a>
                </li>
                <li class="">
                    
    <a class="" href="../releases/">Release Instructions</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Firefox Lockbox for iOS</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Developer Guides &raquo;</li>
        
      
    
    <li>How to: add a browser</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mozilla-lockbox/lockbox-ios/edit/master/docs/add-a-browser.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="add-a-browser-setting-to-firefox-lockbox">Add a browser setting to Firefox Lockbox</h1>
<p><em>These instructions are for developers wanting to add another browser setting so when users tap to open an entry's URL it will be sent to the web browser of their choice.</em></p>
<ol>
<li>Find and add the query scheme the new browser has registered to <code>LSApplicationQueriesSchemes</code> in <code>Common/Resources/Info.plist</code>. For example we'll use <a href="https://github.com/mozilla-lockbox/lockbox-ios/compare/master...joeyg:duckduckgo?expand=1">DuckDuckGo</a>:</li>
</ol>
<p><code>&lt;string&gt;ddgQuickLink&lt;/string&gt;</code></p>
<ol>
<li>Then add a new case to <code>PreferredBrowserSetting</code> in <code>ExternalLinkAction.swift</code>:</li>
</ol>
<p><code>swift
  case DuckDuckGo</code></p>
<ol>
<li>Define that new case in the <code>getPreferredBrowserDeeplink</code> switch statement and return the string with that new query scheme as the expected URL syntax. Keep in mind you may need to encode the URLs and test some links to make sure they open as expected on a real device with the browser installed:</li>
</ol>
<p><code>swift
  case .DuckDuckGo:
    return URL(string: "ddgQuickLink://\(url)")</code></p>
<ol>
<li>Add a constant (string) for the name of the browser (this will be used for the setting) to <code>Common/Resources/Constants.swift</code>:</li>
</ol>
<p><code>swift
  static let settingsBrowserDuckDuckGo = NSLocalizedString("settings.browser.duckduckgo", value: "Duck Duck Go", comment: "Duck Duck Go Browser")</code></p>
<ol>
<li>Then include the constant (name of the browser) to the case in the <code>toString()</code> function back in <code>Action/ExternalLinkAction.swift</code>:</li>
</ol>
<p><code>swift
  case .DuckDuckGo:
    return Constant.string.settingsBrowserDuckDuckGo</code></p>
<ol>
<li>Also add the name constant to the <code>initialSettings</code> variable in <code>Presenter/PreferredBrowserSettingPresenter.swift</code> so the <code>PreferredBrowserSettingPresenter</code> class can mark the browser as "checked" when selected:</li>
</ol>
<p><code>swift
  lazy var initialSettings = [
    CheckmarkSettingCellConfiguration(text: Constant.string.settingsBrowserDuckDuckGo,
    valueWhenChecked: PreferredBrowserSetting.DuckDuckGo),</code></p>
<p>That's it!</p>
<p>If you'd like to contribute a patch with the above, or anything else, please read our <a href="../contributing/">contributing guidelines</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../new-ui/" class="btn btn-neutral float-right" title="How to: add a UI feature">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../updating_libraries/" class="btn btn-neutral" title="Dependencies"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mozilla-lockbox/lockbox-ios/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../updating_libraries/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../new-ui/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
